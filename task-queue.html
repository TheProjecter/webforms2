<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>




























  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <meta content="text/html;charset=ISO-8859-1" http-equiv="Content-Type">




























  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <title>Web Forms 2.0 Implementation Task Queue</title>
  <meta content="Weston Ruter" name="author">
</head>


<body>
<h1>Web Forms 2.0 Task Queue</h1>




























<ol>




























  <li>Repetition blocks that are not siblings of template are not included in repetitionBlocks list</li>




























  <li><font color="#c0c0c0"><strike>Flashing of invalid form controls is not working when there is more than one</strike>.</font></li>




























  <li><strike>Unable to remove transparency when hovering over an error message.</strike></li>




























  

  









  <li><font color="#c0c0c0"><strike>how to determine that an element is
not focusable? We should only focus on a form control which
hasAttribute('autofocus') when it is focusable.</strike></font></li>



























  <li>Add DOMAttrModified handlers for repeatStart, et al</li>



























  <li>Can we use DOMNodeInserted and just see if it is the child of the document?</li>



























  <li>We need to test the implementation in XHTML: is DOMContentLoaded fired after onload in XHTML?</li>



























  <li>Make a greasemonkey script available.... webforms2.user.js......... can there be one for MSIE?</li>



























  <li>Upload test cases to weston.ruter.net and add redirects from repetition model test cases to these ones</li>



























  <li>Can we emulate :valid and :invalid with CSS classNames?</li>


























  <li>Note: using document.body as the test for when loaded is not good... XHTML documents will not work with this.</li>

























  <li>We should have a function that applies the WF2 (not just validation) behavior to a specific context</li>

























  <li>Execute repetition model before Data attributes are prefilled</li>

























  <li>What happens when the MAXLENGTH is changed dynamically?</li>

























  <li><font color="#c0c0c0"><strike>Positioning of error messages is incorrect in Firefox and MSIE (note offsetLeft)</strike></font>.</li>

























  <li><font color="#ff0000">Add onsubmit listener so that
form.checkValidity is called... if checkValidity is called by event
listener (explicitly passed THROW_NO_EXCEPTION argument) &nbsp;then no
exception is raised. If the submit() function is used, then raise an
exception... question: is there a submit event raised when manually
calling submit()??</font>?<br>
























  </li>
























  <li>Created initWF2Functionality to initialize the validation model,
autofocus, etc. Should the Repetition Model functions be called within
here?</li>























  <li>Add support for form.data and <span style="text-decoration: line-through;">select.data</span></li>























  <li>Use Ruby's Racc to create RegExes for URL and Email</li>






















  <li style="text-decoration: line-through; color: rgb(204, 204, 204);">Radio buttons in repetition blocks are unselectable in MSIE.</li>















  
  








  <li style="text-decoration: line-through; color: rgb(204, 204, 204);">Add range checking for date-related controls.</li>






















  <li style="text-decoration: line-through; color: rgb(204, 204, 204);">Add step checking for all controls</li>






















  <li>Can cloneNode be sped up by hacking innerHTML?</li>




















  <li style="text-decoration: line-through; color: rgb(204, 204, 204);">Event handlers on nested repetition blocks are not set</li>


















  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <ol style="text-decoration: line-through; color: rgb(204, 204, 204);">


















    <li>cloneNode needs to be fixed. onadd et al handlers should be copied for child repetition templates</li>


















    <li>what about onclick attributes??? they are being made into DOM properties and so are not being iterated in Firefox</li>


















  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  </ol>




















  <li style="text-decoration: line-through; color: rgb(204, 204, 204);">Onadd HTML attribute handlers on any element does not work</li>



















  <li style="text-decoration: line-through; color: rgb(204, 204, 204);">Make onadd et al deprecated</li>


















  <li style="text-decoration: line-through;">(?:.|\n)+ ??</li>

















  <li>Add namespace support</li>

















  <li>If we use Flash, I bet we can do file uploads and also do the
enctype XML for files... once a user selects a file, it should be
loaded by Flash and converted into the base64 format. This format can
then be added to the output.</li>
















  <li>Implement datalist control, and then allow prefilling.</li>
















  <li><span style="text-decoration: line-through;">Use localName uinstead of nodeName.</span>. localName not supported by MSIE</li>
















  <li style="text-decoration: line-through; color: rgb(204, 204, 204);">MSIE cannot appendChild an arbitrary cloned node. Unable to add OPTGROUP elements.</li>














  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <ol style="color: rgb(204, 204, 204);">














    <li>perhaps we can serialize the contents of the XML node, and then set the innerHTML to it.</li>












    <li><a href="http://support.microsoft.com/default.aspx?scid=kb;en-us;276228&amp;Product=iep" title="">MSKB 276228 - BUG: Internet Explorer Fails to Set the innerHTML Property of the Select Object</a></li>












    <li><a href="http://support.microsoft.com/default.aspx?scid=kb;en-us;290717&amp;Product=iep" title="">MSKB 290717 - BUG: SELECT Element Causes Application Error in Internet Explorer</a></li>












    <li> SELECT: dynamically created SELECT cannot be made <em>multiple</em> without nasty kludge --&nbsp;</li>














  
  
  
  
  
  
  
  
  
  
  
  
  
  
  </ol>











  <li style="text-decoration: line-through; color: rgb(204, 204, 204);">How do I parse XML documents on the fly? In MSIE and Firefox</li>










  <li style="text-decoration: line-through; color: rgb(204, 204, 204);">Select values not selected in MSIE</li>









  

  <li style="text-decoration: line-through;">Made type attribute case-insensitive</li>









  <li style="text-decoration: line-through;">textarea@maxlength is not working</li>







  <li style="text-decoration: line-through;">There is a leading firstLine pad for the error messages in MSIE.</li>







  <li>Clicking checkbox group while flashing causes two of the radio buttons to flash!?</li>






  <li style="text-decoration: line-through; color: rgb(204, 204, 204);">We need to sort the results from getElementByTagNamesAndAttribute</li>






  <li style="text-decoration: line-through; color: rgb(204, 204, 204);">We need to sort the results from getElementsByTagName</li>






  <li style="text-decoration: line-through;">Develop on the file webforms2_src.js which is then stripped of
comments into webforms2.js and then compressed into webforms2-p.js</li>



  <li>Safari 3 is not handling the onclick DOM property handlers of
repetition buttons well. When setting onclick to null, it is still
being executed.</li>
  <li></li>
















  









</ol>









<br>









<h2>Pending issues (unimplemented features)</h2>









<ol>









  <li>The <code><a href="../../../My%20Downloads/Web%20Forms%202.0.html#disabled">disabled</a></code> attribute applies to
     all form controls except the <code><a href="../../../My%20Downloads/Web%20Forms%202.0.html#output0">output</a></code>
     element, and also to the <code>fieldset</code>, <code>option</code>, and
     <code>optgroup</code> elements. &nbsp;When applied to a <code>fieldset</code> element it overrides the
     <code><a href="../../../My%20Downloads/Web%20Forms%202.0.html#disabled">disabled</a></code> attributes of any
     descendent form controls (regardless of whether they are associated with
     the same form). In other words, a form control shall be disabled if it
     has its <code><a href="../../../My%20Downloads/Web%20Forms%202.0.html#disabled">disabled</a></code> attribute set, or
     if any of its ancestor <code>fieldset</code> elements have
     <em>their</em> <code><a href="../../../My%20Downloads/Web%20Forms%202.0.html#disabled">disabled</a></code> attribute
     set.</li>









  <li>form attribute on form elements to associate controls with a form when they are not contained within it.</li>









  <li>The <code>optgroup</code> element may now be nested
   inside other <code>optgroup</code> elements.</li>









  <li>The regular expression used for email fields is not the <code>addr-spec</code>
    token defined in RFC 2822 section 3.4.1.</li>









  <li>The regular expression used for url fields is not an IRI, as defined by <a href="../../../My%20Downloads/Web%20Forms%202.0.html#refsRFC3987">[RFC3987]</a> (the
    <code>IRI</code> token, defined in RFC 3987 section 2.2<!--, in
    full logical order, as per RFC 3987 section 4.1-->).</li>









  <li>For file upload controls, the [min and max attribute] values indicate the allowed number of
   files.</li>









  <li>If the author specified step is too small for the UA to handle (for
   example, <code>1e-9999999</code> would probably underflow most
   implementations) then the UA should treat the value as <code title="step-any"><a href="../../../My%20Downloads/Web%20Forms%202.0.html#any">any</a></code>. If the given <code><a href="../../../My%20Downloads/Web%20Forms%202.0.html#step">step</a></code> value is not one of the allowed values, then
   the default is used.</li>









  <li>UAs may now support the <code><a href="../../../My%20Downloads/Web%20Forms%202.0.html#accesskey">accesskey</a></code> attribute on <code>select</code>
     elements (and must at a minimum support the relevant DOM attribute).&nbsp;The <code><a href="../../../My%20Downloads/Web%20Forms%202.0.html#accesskey">accesskey</a></code> attribute on
     <code>label</code> elements must act the same way as it would if
     specified on the associated element directly.</li>









  <li>For <a href="../../../My%20Downloads/Web%20Forms%202.0.html#file" title="file">file upload controls</a>, the <code><a href="../../../My%20Downloads/Web%20Forms%202.0.html#required0">required</a></code> attribute shall only be satisfied if
   at least one valid file is selected, regardless of the <code><a href="../../../My%20Downloads/Web%20Forms%202.0.html#min">min</a></code> and <code><a href="../../../My%20Downloads/Web%20Forms%202.0.html#max">max</a></code>
   attributes.</li>









  <li>Required attribute for SELECT elements is tested correctly?</li>








  <li>Required attributes set on radio and checkbox controls is correct? Must it appear on all elements or only one.</li>


  
  
  <ol>


    <li><span style="color: rgb(255, 0, 0);">Opera implementation seems screwy</span>.</li>


  
  
  </ol>







  <li>First, the form control that the field references must be identified.
     This is done by walking the list of form controls associated with the
     form until one is found that has a name exactly equal to the name given
     in the <code>field</code> element's <code><a href="../../../My%20Downloads/Web%20Forms%202.0.html#name">name</a></code> attribute, skipping as many such matches as
     is specified in the <code>index</code> attribute, or, <em>if the
     <code>index</code> attribute was omitted</em>, skipping over any
     <code>type="radio"</code> and <code>type="checkbox"</code> controls that
     have the exact name given but have a <span style="text-decoration: underline;">value that is not exactly the same
     as the contents of the </span><code style="text-decoration: underline;">field</code><span style="text-decoration: underline;"> element</span>. <span style="color: rgb(255, 0, 0);">SPECIFICATION DEFICIENCY: Note that this is not completely true. If the value of a <code>field</code> element is empty, then it should not be skipped if it associated with a <code>radio</code> button or <code>checkbox</code>.</span><span style="color: rgb(255, 0, 0);">
For example, the specification states four paragraphs later, "The only
values that would have an effect in this example are "", which would
uncheck the checkbox, and "green", which would check the checkbox."</span></li>







  <li>Why not min and max attributes on checkboxes? Why not min and max attributes on SELECT elements?</li>






  

  <li>There is currently no GUI for date/time-related fields.</li>



  <li>The <code>form</code> attribute
   gives a space-separated list of IDs of <code>form</code> elements that the
   form control is to be associated with, and overrides the relationship
   between the form control and any ancestor <code>form</code> element.</li>



  <li>The autocomplete attribute</li>



  <li>The <dfn id="inputmode"><code>inputmode</code></dfn> attribute applies to
   the <code>input</code> element when it has a <code>type</code> attribute
   of <code><a href="../../../My%20Downloads/Web%20Forms%202.0.html#text">text</a></code>, <code><a href="../../../My%20Downloads/Web%20Forms%202.0.html#password">password</a></code>, <code><a href="../../../My%20Downloads/Web%20Forms%202.0.html#email">email</a></code><!--,
  <code>tel</code>-->, or <code><a href="../../../My%20Downloads/Web%20Forms%202.0.html#url">url</a></code>, and to the <code>textarea</code> element.</li>



  <li>The <code><a href="../../../My%20Downloads/Web%20Forms%202.0.html#datalist">datalist</a></code> element and the <code><a href="../../../My%20Downloads/Web%20Forms%202.0.html#list">list</a></code> attribute</li>



  <li>The <dfn id="output0"><code>output</code></dfn> element</li>



  <li>Extensions to the
   <code>textarea</code> element (the wrap attribute)</li>



  <li><span class="secno"></span>Extensions to file upload
   controls</li>



  <li>Extensions to the
   <code>form</code> element</li>



  <li>Extensions to the submit buttons</li>



  <li>Handling unexpected elements and values</li>



  <li>The forms event model</li>



  <li>Receiving the results of
   form submission</li>



  <li>The
   <code>DOMControlValueChanged</code> event</li>



  <li>Form submission</li>



  <li>Handling characters outside the submission character encoding</li>



  <li>Submitting the encoded form data set</li>



  <li>(Partially implemented) Extensions to the HTML Level 2 DOM interfaces</li>



  <li>(Partially) Additions specific to the
   <code><a href="../../../My%20Downloads/Web%20Forms%202.0.html#htmlformelement">HTMLFormElement</a></code> interface</li>



  <li><span class="secno"></span>Additions specific to the
   <code><a href="../../../My%20Downloads/Web%20Forms%202.0.html#htmlselectelement">HTMLSelectElement</a></code> interface</li>



  <li><span class="secno"></span>The <code><a href="../../../My%20Downloads/Web%20Forms%202.0.html#htmldatalistelement">HTMLDataListElement</a></code> interface</li>



  <li>Changes to the <code><a href="../../../My%20Downloads/Web%20Forms%202.0.html#htmloptionelement">HTMLOptionElement</a></code> interface</li>



  <li>Additions specific to the
   <code><a href="../../../My%20Downloads/Web%20Forms%202.0.html#htmlfieldsetelement">HTMLFieldsetElement</a></code>
   interface</li>



  <li>The <code><a href="../../../My%20Downloads/Web%20Forms%202.0.html#htmloutputelement">HTMLOutputElement</a></code> interface</li>



  <li>(Partially) New DOM attributes for new content attributes</li>



  <li><span style="font-weight: bold;">Additions specific to the
   </span><code style="font-weight: bold;"><a href="../../../My%20Downloads/Web%20Forms%202.0.html#htmlinputelement">HTMLInputElement</a></code><span style="font-weight: bold;"> interface</span>&nbsp;</li>



  <li>Labels</li>



  <li>Firing change events</li>



  <li>Presentation and rendering</li>









</ol>









<h2>Untested features</h2>









<ol>









  <li>If a control has its <code>type</code> attribute changed to another
   type, then the user agent must reinterpret the current value (given by the
   <code>value</code> DOM attribute) and the default value (given by the
   <code>value</code> content attribute and the <code>defaultValue</code> DOM
   attribute) in light of the new type. Values that no longer match the
   format allowed for the control must be handled as described <a href="../../../My%20Downloads/Web%20Forms%202.0.html#errInvalidValue">in the error handling section</a>.</li>









  <li>If a control has its <code>type</code> attribute changed to another
   type, then the user agent must reinterpret the <code><a href="../../../My%20Downloads/Web%20Forms%202.0.html#min">min</a></code> and <code><a href="../../../My%20Downloads/Web%20Forms%202.0.html#max">max</a></code>
   attributes. If an attribute has an invalid value according to the new
   type, then the appropriate default must be used (and not, e.g., the
   default appropriate for the previous type). Control values that no longer
   match the range allowed for the control must be handled as described <a href="../../../My%20Downloads/Web%20Forms%202.0.html#errOORValue">in the error handling section</a>.</li>









  <li>If a control has its <code>type</code> attribute changed to another
   type, then the user agent must reinterpret the <code><a href="../../../My%20Downloads/Web%20Forms%202.0.html#step">step</a></code> attribute. If it has an invalid value
   according to the new type, then the new appropriate default must be used.
   Control values that no longer match the precision allowed for the control
   must be handled as described <a href="../../../My%20Downloads/Web%20Forms%202.0.html#errOORValue">in the error handling
   section</a>.</li>









</ol>









<h2>Implemented Features</h2>









<ul>









  <li>data attribute for select and form elements</li>









  <li>Extensions to the input element</li>









  
  
  
  
  
  
  
  
  
  <ul>









    <li>input types:
datetime,&nbsp;datetime-local,&nbsp;date,&nbsp;month,&nbsp;week,&nbsp;time,&nbsp;number,&nbsp;range,&nbsp;email,
and url</li>









    <li>min, max, and step attributes</li>









  
  
  
  
  
  
  
  
  
  </ul>









  <li>Ranges for all form controls besides file input</li>









  <li>Precision: step attribute</li>









  <li>The <code>maxlength</code> attribute applies to <code><a href="../../../My%20Downloads/Web%20Forms%202.0.html#text">text</a></code>,
     <code><a href="../../../My%20Downloads/Web%20Forms%202.0.html#password">password</a></code>, <code><a href="../../../My%20Downloads/Web%20Forms%202.0.html#url">url</a></code>, and <code><a href="../../../My%20Downloads/Web%20Forms%202.0.html#email">email</a></code><!--,
    <code>tel</code> and <code>file</code>-->
     input types, and <code>textarea</code> elements. In particular, it does
     not apply to the date-related, time-related, and numeric control types.</li>









  <li>For the <code><a href="../../../My%20Downloads/Web%20Forms%202.0.html#text">text</a></code>, <code><a href="../../../My%20Downloads/Web%20Forms%202.0.html#password">password</a></code>, <code><a href="../../../My%20Downloads/Web%20Forms%202.0.html#email">email</a></code>, <!--<code>tel</code>,--> and <code><a href="../../../My%20Downloads/Web%20Forms%202.0.html#url">url</a></code> types of the <code>input</code> element, and
   for the <code>textarea</code> element, the <dfn id="pattern"><code>pattern</code></dfn> attribute specifies a pattern that
   the control value must match.</li>









  <li>Form controls can have the <dfn id="required0"><code>required</code></dfn>
   attribute specified, to indicate that the user must enter a value into the
   form control before submitting the form.</li>









  <li>Any form control (except <code><a href="../../../My%20Downloads/Web%20Forms%202.0.html#hidden">hidden</a></code> and
   <code><a href="../../../My%20Downloads/Web%20Forms%202.0.html#output0">output</a></code> controls) can have an <code><a href="../../../My%20Downloads/Web%20Forms%202.0.html#autofocus0">autofocus</a></code> attribute specified.</li>



  <li>The repetition model for repeating form controls</li>



  <li>Form validation</li>



  <li>Successful form controls</li>



  <li>Fetching data from external resources</li>



  
  
  
  <ul>



    <li>Filling
   <code>select</code> elements</li>



    <li>Seeding a form with initial values</li>



  
  
  
  </ul>



  <li>Validation APIs</li>



  <li>Repetition interfaces</li>









</ul>




























</body>
</html>
